<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title th:text="${pageTitle} ?: 'Browse Cars | Horizon Motors'">
      Browse Cars | Horizon Motors
    </title>
    <link rel="stylesheet" th:href="@{/css/site.css}" />
    <script defer src="/js/site.js"></script>
  </head>
  <body>
    <header class="nav">
      <div class="container nav__inner">
        <a class="brand" th:href="@{/}">Horizon<span>Motors</span></a>
        <nav class="links">
          <a th:href="@{/}">Home</a>
          <a th:href="@{/cars}">Browse Cars</a>
          <a th:href="@{/financing}">Financing</a>
          <a th:href="@{/contact}">Contact</a>
        </nav>
      </div>
    </header>

    <main class="container">
      <section class="section">
        <div class="section__head reveal">
          <h2>All Cars</h2>
          <div class="filters">
            <form class="filters__form" th:action="@{/cars}" method="get">
              <input
                class="input"
                type="text"
                name="q"
                placeholder="Search make, model, year"
                th:value="${q}"
              />
              <select class="input" name="sort">
                <option th:value="new" th:selected="${sort == 'new'}">
                  Newest
                </option>
                <option th:value="priceAsc" th:selected="${sort == 'priceAsc'}">
                  Price: Low → High
                </option>
                <option
                  th:value="priceDesc"
                  th:selected="${sort == 'priceDesc'}"
                >
                  Price: High → Low
                </option>
                <option
                  th:value="mileageAsc"
                  th:selected="${sort == 'mileageAsc'}"
                >
                  Mileage: Low → High
                </option>
              </select>
              <button class="btn btn--primary" type="submit">Apply</button>
            </form>
          </div>
        </div>

        <div class="grid">
          <div class="card reveal" th:each="c : ${cars}" th:id="${c.id}">
            <div class="card__img">
              <img
                loading="lazy"
                th:src="${c.imageUrl}"
                th:alt="${c.year + ' ' + c.make + ' ' + c.model}"
                onerror="this.src='/img/cars/placeholder.jpg'"
              />
              <div class="badge" th:text="${c.year}">2021</div>
            </div>
            <div class="card__body">
              <h3 th:text="${c.make + ' ' + c.model}">Model</h3>
              <p class="muted" th:text="${c.mileage + ' • ' + c.transmission}">
                ,
              </p>
              <div class="card__meta">
                <div class="price" th:text="${c.price}">$0</div>
                <a class="btn btn--ghost" href="#">View</a>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container footer__inner">
        <div>
          ©
          <span th:text="${#calendars.format(#dates.createNow(),'yyyy')}"
            >2025</span
          >
          Horizon Motors
        </div>
        <div class="footer__links">
          <a href="#">Privacy</a>
          <a href="#">Terms</a>
        </div>
      </div>
    </footer>
  </body>
</html>
